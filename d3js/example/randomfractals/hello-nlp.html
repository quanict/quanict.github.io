<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello, NLP!</title>
    <style>
        .scrollable-container {
            max-height: 400px;
            overflow: auto;
        }
        .short-list {
            max-height: 200px;
        }
        .big{
            font-size:1.5rem;
            color:cornflowerblue;
        }
        .small{
            color:grey;
            margin-top:30px;
        }
        .term { color:grey; cursor:pointer;}
        .nl-Person { border-bottom:2px solid #6393b9; }
        .nl-Pronoun { border-bottom:2px solid #81acce; }
        .nl-Plural { border-bottom:2px solid steelblue; }
        .nl-Singular { border-bottom:2px solid lightsteelblue; }
        .nl-Verb { border-bottom:2px solid palevioletred; }
        .nl-Adverb { border-bottom:2px solid #f39c73; }
        .nl-Adjective { border-bottom:2px solid #b3d3c6; }
        .nl-Determiner { border-bottom:2px solid #d3c0b3; }
        .nl-Preposition { border-bottom:2px solid #9794a8; }
        .nl-Conjunction { border-bottom:2px solid #c8c9cf; }
        .nl-Value { border-bottom:2px solid palegoldenrod; }
        .nl-QuestionWord { border-bottom:2px solid lavender; }
        .nl-Acronym { border-bottom:2px solid violet; }
        .nl-Possessive { border-bottom:2px solid #7990d6; }
        .nl-Noun { border-bottom:2px solid #7990d6; }
        .nl-Expression { border-bottom:2px solid #b3d3c6; }
        .nl-Negative { border-bottom:2px solid #b4adad; }
    </style>
</head>
<body>
<div class="container">
    <h1>Hello, NLP!</h1>
    <resource>https://observablehq.com/@randomfractals/hello-nlp</resource>
    <p>Visualizing music lyrics with <a href="http://compromise.cool/">http://compromise.cool</a> natural language processing (NLP) library and
        <a href="https://beta.observablehq.com/@randomfractals/hello-nlp#imports">#other dataViz libs</a>
    </p>

    <link href="https://fonts.googleapis.com/css?family=Pacifico|Corben" rel="stylesheet">
    <div class="row">
        <p style="font-family:Pacifico;">Pacifico</p>
        <p style="font-family:Corben;">Corben</p>
    </div>

    <h3>Mac Miller - <a href="https://www.youtube.com/watch?v=SsKT0s5J8ko">Self Care (video)</a></h3>
    <div class="row">
    </div>


    <h3>Mac Miller - <a href="https://www.youtube.com/watch?v=SsKT0s5J8ko">Self Care (video)</a></h3>
    downloadWordCloud = downloadWordCloudSvg('word-cloud', wordCloud)

    <h3>Tagged NLP Lyrics</h3>
    <div class="scrollable-container">
        ${printHtml(normalizedDoc)}
    </div>

    <h3>NLP</h3>
    <script src="../../../compromise/11.14.3/compromise.min.js"></script>
    <script>
        const doc = nlp(lyrics),
            normalizedDoc = nlp(lyrics).normalize({
                whitespace: true, // remove hyphens, newlines, and force one space between words
                punctuation: true, // remove commas, semicolons - but keep sentence-ending punctuation
                case: true, // keep only first-word, and 'entity' titlecasing
                numbers: true, // 'one'  →  '1'
                plurals: true, // 'eyes'  →  'eye'
                verbs: true, // 'swtiched' → 'switch'
            }),
            sentences = doc.sentences().data(),
            terms = doc.terms().data(),
            ngrams = doc.ngrams().data(),
            contractions = doc.contractions().data();
    </script>

    <h3>Lingo Parts</h3>

    <h3>Boring Code Parts</h3>
    <h5>Word Cloud</h5>

    <script src="nlp-word-cloud.js"></script>
    <script src="nlp-text-tags.js"></script>
    <script src="nlp-tag-tree.js"></script>
    <script>
        const verbsInfo = normalizedDoc.verbs().out('topk'), // sort by frequency
            verbs = doc.verbs().out('array'),
            verbList = toShortList(printList(verbsInfo)),
            nouns = doc.nouns().out('array'),
            nounsInfo = normalizedDoc.nouns().out('topk'), // sort by frequency
            nounList = toShortList(printList(nounsInfo))
        ;

        const words = toWords(nounsInfo)
            .concat(toWords(verbsInfo))
            .concat(toWords(adverbsInfo))
            .concat(toWords(adjectivesInfo))
            .sort((a,b) => b.freq - a.freq);

        wordCloud = createWordCloudSvg(words);

        lingoTree = createTagTreeSvg(tagTree)
        downloadLingoTree = downloadTagTreeSvg('lingo-tree', lingoTree);

        words = toWords(nounsInfo)
            .concat(toWords(verbsInfo))
            .concat(toWords(adverbsInfo))
            .concat(toWords(adjectivesInfo))
            .sort((a,b) => b.freq - a.freq);
        doc = nlp(lyrics)
        normalizedDoc = nlp(lyrics).normalize({
            whitespace: true, // remove hyphens, newlines, and force one space between words
            punctuation: true, // remove commas, semicolons - but keep sentence-ending punctuation
            case: true, // keep only first-word, and 'entity' titlecasing
            numbers: true, // 'one'  →  '1'
            plurals: true, // 'eyes'  →  'eye'
            verbs: true, // 'swtiched' → 'switch'
        })

        sentences = doc.sentences().data()
        terms = doc.terms().data()
        ngrams = doc.ngrams().data()
        contractions = doc.contractions().data()
    </script>
</div>

<script>
</script>
</body>
</html>
function cleanUrl(e,t,i){if(e){let e;try{e=decodeURIComponent(unescape(i)).replace(nonWordAndColonTest,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!originIndependentUrl.test(i)&&(i=resolveUrl(t,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(e){return null}return i}const editorCodeTree={files:[],addCodeTree:function(e){this.files.push(e)}};function editorCreateDialog(e){e=$.extend(!0,{name:"",width:420,height:240,title:"",drag:!0,closed:!0,cached:!1,content:"",mask:!0,maskStyle:{backgroundColor:"#fff",opacity:.1},lockScreen:!0,footer:!0,buttons:!1},e);var t=this,i=this.editor,o=editormd.classPrefix,r=(new Date).getTime(),n=""===e.name?o+"dialog-"+r:e.name,a='<div class="'+o+"dialog "+n+'">';""!==e.title&&(a+='<div class="'+o+'dialog-header"'+(e.drag?' style="cursor: move;"':"")+">",a+='<strong class="'+o+'dialog-title">'+e.title+"</strong>",a+="</div>"),e.closed&&(a+='<a href="javascript:;" class="fa fa-close '+o+'dialog-close"></a>'),a+='<div class="'+o+'dialog-container">'+e.content,(e.footer||"string"==typeof e.footer)&&(a+='<div class="'+o+'dialog-footer">'+("boolean"==typeof e.footer?"":e.footer)+"</div>"),a+="</div>",a+='<div class="'+o+"dialog-mask "+o+'dialog-mask-bg"></div>',a+='<div class="'+o+"dialog-mask "+o+'dialog-mask-con"></div>',a+="</div>",i.append(a);var s=i.find("."+n);s.lockScreen=function(i){return e.lockScreen&&($("html,body").css("overflow",i?"hidden":""),t.resize()),s},s.showMask=function(){return e.mask&&i.find("."+o+"mask").css(e.maskStyle).css("z-index",editormd.dialogZindex-1).show(),s},s.hideMask=function(){return e.mask&&i.find("."+o+"mask").hide(),s},s.loading=function(e){return s.find("."+o+"dialog-mask")[e?"show":"hide"](),s},s.lockScreen(!0).showMask(),s.show().css({zIndex:editormd.dialogZindex,border:editormd.isIE8?"1px solid #ddd":"",width:"number"==typeof e.width?e.width+"px":e.width,height:"number"==typeof e.height?e.height+"px":e.height});var l=function(){s.css({top:($(window).height()-s.height())/2+"px",left:($(window).width()-s.width())/2+"px"})};if(l(),$(window).resize(l),s.children("."+o+"dialog-close").bind("click",function(){s.hide().lockScreen(!1).hideMask(),e.cached||s.remove()}),"object"==typeof e.buttons){var d=s.footer=s.find("."+o+"dialog-footer");for(var c in e.buttons){var h=e.buttons[c],u=o+c+"-btn";d.append('<button class="'+o+"btn "+u+'">'+h[0]+"</button>"),h[1]=$.proxy(h[1],s),d.children("."+u).bind("click",h[1])}}if(""!==e.title&&e.drag){var f,m,g=s.children("."+o+"dialog-header");e.mask||g.bind("click",function(){editormd.dialogZindex+=2,s.css("z-index",editormd.dialogZindex)});var p=function(e){e.removeClass(o+"user-unselect").off("selectstart")},w=function(e){e.addClass(o+"user-unselect").on("selectstart",function(){return!1})},v=function(e){e=e||window.event;var t,i,o=parseInt(s[0].style.left),r=parseInt(s[0].style.top);o>=0?o+s.width()<=$(window).width()?t=e.clientX-f:(t=$(window).width()-s.width(),document.onmousemove=null):(t=0,document.onmousemove=null),r>=0?i=e.clientY-m:(i=0,document.onmousemove=null),document.onselectstart=function(){return!1},w($("body")),w(s),s[0].style.left=t+"px",s[0].style.top=i+"px"};g.mousedown(function(e){e=e||window.event,f=e.clientX-parseInt(s[0].style.left),m=e.clientY-parseInt(s[0].style.top),document.onmousemove=v}),document.onmouseup=function(){p($("body")),p(s),document.onselectstart=null,document.onmousemove=null},g.touchDraggable=function(){var e=null;this.bind("touchstart",function(t){var i=t.originalEvent,o=$(this).parent().position();e={x:i.changedTouches[0].pageX-o.left,y:i.changedTouches[0].pageY-o.top}}).bind("touchmove",function(t){t.preventDefault();var i=t.originalEvent;$(this).parent().css({top:i.changedTouches[0].pageY-e.y,left:i.changedTouches[0].pageX-e.x})})},g.touchDraggable()}return editormd.dialogZindex+=2,s}editorClassPrefix="editormd-",editormdTitle="Editor.md";const editorDefault={mode:"gfm",name:"",value:"",theme:"",editorTheme:"default",previewTheme:"",markdown:"",appendMarkdown:"",width:"100%",height:"100%",path:"./lib/",pluginPath:"",delay:300,autoLoadModules:!0,watch:!0,placeholder:"Enjoy Markdown! coding now...",gotoLine:!0,codeFold:!1,autoHeight:!1,autoFocus:!0,autoCloseTags:!0,searchReplace:!0,syncScrolling:!0,readOnly:!1,tabSize:4,indentUnit:4,lineNumbers:!0,lineWrapping:!0,autoCloseBrackets:!0,showTrailingSpace:!0,matchBrackets:!0,indentWithTabs:!0,styleSelectedText:!0,matchWordHighlight:!0,styleActiveLine:!0,dialogLockScreen:!0,dialogShowMask:!0,dialogDraggable:!0,dialogMaskBgColor:"#fff",dialogMaskOpacity:.1,fontSize:"13px",saveHTMLToTextarea:!1,disabledKeyMaps:[],onload:function(){},onresize:function(){},onchange:function(){},onwatch:null,onunwatch:null,onpreviewing:function(){},onpreviewed:function(){},onfullscreen:function(){},onfullscreenExit:function(){},onscroll:function(){},onpreviewscroll:function(){},imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"",crossDomainUpload:!1,uploadCallbackURL:"",toc:!0,tocm:!1,tocTitle:"",tocDropdown:!1,tocContainer:"",tocStartLevel:1,htmlDecode:!1,pageBreak:!0,atLink:!0,emailLink:!0,taskList:!1,emoji:!1,tex:!1,flowChart:!1,sequenceDiagram:!1,previewCodeHighlight:!0,toolbar:!0,toolbarAutoFixed:!0,toolbarIcons:"full",toolbarTitles:{},toolbarHandlers:{ucwords:function(){return editormd.toolbarHandlers.ucwords},lowercase:function(){return editormd.toolbarHandlers.lowercase}},toolbarCustomIcons:{lowercase:'<a href="javascript:;" title="Lowercase" unselectable="on"><i class="fa" name="lowercase" style="font-size:24px;margin-top: -10px;">a</i></a>',ucwords:'<a href="javascript:;" title="ucwords" unselectable="on"><i class="fa" name="ucwords" style="font-size:20px;margin-top: -3px;">Aa</i></a>'},toolbarIconsClass:{undo:"fa-undo",redo:"fa-repeat",bold:"fa-bold",del:"fa-strikethrough",italic:"fa-italic",quote:"fa-quote-left",uppercase:"fa-font",h1:editorClassPrefix+"bold",h2:editorClassPrefix+"bold",h3:editorClassPrefix+"bold",h4:editorClassPrefix+"bold",h5:editorClassPrefix+"bold",h6:editorClassPrefix+"bold","list-ul":"fa-list-ul","list-ol":"fa-list-ol",hr:"fa-minus",link:"fa-link","reference-link":"fa-anchor",image:"fa-picture-o",code:"fa-code","preformatted-text":"fa-file-code-o","code-block":"fa-file-code-o",table:"fa-table",datetime:"fa-clock-o",emoji:"fa-smile-o","html-entities":"fa-copyright",pagebreak:"fa-newspaper-o","goto-line":"fa-terminal",watch:"fa-eye-slash",unwatch:"fa-eye",preview:"fa-desktop",search:"fa-search",fullscreen:"fa-arrows-alt",clear:"fa-eraser",help:"fa-question-circle",info:"fa-info-circle"},toolbarIconTexts:{},lang:{name:"zh-cn",description:"开源在线Markdown编辑器<br/>Open source online Markdown editor.",tocTitle:"目录",toolbar:{undo:"撤销（Ctrl+Z）",redo:"重做（Ctrl+Y）",bold:"粗体",del:"删除线",italic:"斜体",quote:"引用",ucwords:"将每个单词首字母转成大写",uppercase:"将所选转换成大写",lowercase:"将所选转换成小写",h1:"标题1",h2:"标题2",h3:"标题3",h4:"标题4",h5:"标题5",h6:"标题6","list-ul":"无序列表","list-ol":"有序列表",hr:"横线",link:"链接","reference-link":"引用链接",image:"添加图片",code:"行内代码","preformatted-text":"预格式文本 / 代码块（缩进风格）","code-block":"代码块（多语言风格）",table:"添加表格",datetime:"日期时间",emoji:"Emoji表情","html-entities":"HTML实体字符",pagebreak:"插入分页符","goto-line":"跳转到行",watch:"关闭实时预览",unwatch:"开启实时预览",preview:"全窗口预览HTML（按 Shift + ESC还原）",fullscreen:"全屏（按ESC还原）",clear:"清空",search:"搜索",help:"使用帮助",info:"关于"+editormdTitle},buttons:{enter:"确定",cancel:"取消",close:"关闭"},dialog:{link:{title:"添加链接",url:"链接地址",urlTitle:"链接标题",urlEmpty:"错误：请填写链接地址。"},referenceLink:{title:"添加引用链接",name:"引用名称",url:"链接地址",urlId:"链接ID",urlTitle:"链接标题",nameEmpty:"错误：引用链接的名称不能为空。",idEmpty:"错误：请填写引用链接的ID。",urlEmpty:"错误：请填写引用链接的URL地址。"},image:{title:"添加图片",url:"图片地址",link:"图片链接",alt:"图片描述",uploadButton:"本地上传",imageURLEmpty:"错误：图片地址不能为空。",uploadFileEmpty:"错误：上传的图片不能为空。",formatNotAllowed:"错误：只允许上传图片文件，允许上传的图片文件格式有："},preformattedText:{title:"添加预格式文本或代码块",emptyAlert:"错误：请填写预格式文本或代码的内容。"},codeBlock:{title:"添加代码块",selectLabel:"代码语言：",selectDefaultText:"请选择代码语言",otherLanguage:"其他语言",unselectedLanguageAlert:"错误：请选择代码所属的语言类型。",codeEmptyAlert:"错误：请填写代码内容。"},htmlEntities:{title:"HTML 实体字符"},help:{title:"使用帮助"}}}};function editorFilterHTMLTags(e,t){if("string"!=typeof e&&(e=e.toString()),"string"!=typeof t)return e;for(var i=t.split("|"),o=i[0].split(","),r=i[1],n=0,a=o.length;n<a;n++){var s=o[n];e=e.replace(new RegExp("<s*"+s+"s*([^>]*)>([^>]*)<s*/"+s+"s*>","igm"),"")}if(void 0!==r){var l=/\<(\w+)\s*([^\>]*)\>([^\>]*)\<\/(\w+)\>/gi;e="*"===r?e.replace(l,function(e,t,i,o,r){return"<"+t+">"+o+"</"+r+">"}):"on*"===r?e.replace(l,function(e,t,i,o,r){var n=$("<"+t+">"+o+"</"+r+">"),a=$(e)[0].attributes,s={};$.each(a,function(e,t){'"'!==t.nodeName&&(s[t.nodeName]=t.nodeValue,"href"===t.nodeName&&t.nodeValue.toLowerCase().indexOf("javascript:")>=0&&(s[t.nodeName]="javascript:;"))}),$.each(s,function(e){0===e.indexOf("on")&&delete s[e]}),n.attr(s);var l=void 0!==n[1]?$(n[1]).text():"";return n[0].outerHTML+l}):e.replace(l,function(e,t,i,o){var n=r.split(","),a=$(e);return a.html(o),$.each(n,function(e){a.attr(n[e],null)}),a[0].outerHTML})}return e}const editorLockScreen={lockScreen:function(e){$("html,body").css("overflow",e?"hidden":"")}};function editorMarkdownToHTML(e,t){editormd.$marked=marked;var i=$("#"+e),o=i.settings=$.extend(!0,{},{gfm:!0,toc:!0,tocm:!1,tocStartLevel:1,tocTitle:"目录",tocDropdown:!1,tocContainer:"",markdown:"",markdownSourceCode:!1,htmlDecode:!1,autoLoadKaTeX:!0,pageBreak:!0,atLink:!0,emailLink:!0,tex:!1,taskList:!1,emoji:!1,flowChart:!1,sequenceDiagram:!1,previewCodeHighlight:!0},t||{}),r=i.find("textarea");r.length<1&&(i.append("<textarea></textarea>"),r=i.find("textarea"));var n=""===o.markdown?r.val():o.markdown,a=[],s={toc:o.toc,tocm:o.tocm,tocStartLevel:o.tocStartLevel,taskList:o.taskList,emoji:o.emoji,tex:o.tex,pageBreak:o.pageBreak,atLink:o.atLink,emailLink:o.emailLink,flowChart:o.flowChart,sequenceDiagram:o.sequenceDiagram,previewCodeHighlight:o.previewCodeHighlight},l={renderer:editormd.markedRenderer(a,s),gfm:o.gfm,tables:!0,breaks:!0,pedantic:!1,sanitize:!o.htmlDecode,smartLists:!0,smartypants:!0};n=n.toString();var d=marked(n,l);d=editormd.filterHTMLTags(d,o.htmlDecode),o.markdownSourceCode?r.text(n):r.remove(),i.addClass("markdown-body "+this.classPrefix+"html-preview").append(d),i.find(".task-list-item").each(function(){$(this).parent().addClass("task-list")});var c=""!==o.tocContainer?$(o.tocContainer):i;if(""!==o.tocContainer&&c.attr("previewContainer",!1),o.toc&&(i.tocContainer=this.markdownToCRenderer(a,c,o.tocDropdown,o.tocStartLevel),(o.tocDropdown||i.find("."+this.classPrefix+"toc-menu").length>0)&&this.tocDropdownMenu(i,o.tocTitle),""!==o.tocContainer&&i.find(".editormd-toc-menu, .editormd-markdown-toc").remove()),o.previewCodeHighlight&&(i.find("pre").addClass("prettyprint linenums"),window.prettyPrint()),!editormd.isIE8&&(o.flowChart&&i.find(".flowchart").flowChart(),o.sequenceDiagram)){var h=i.find(".sequence-diagram");h.length>0&&h.sequenceDiagram({theme:"simple"})}if(o.tex){var u=function(){i.find("."+editormd.classNames.tex).each(function(){var e=$(this);katex.render(e.html().replace(/&lt;/g,"<").replace(/&gt;/g,">"),e[0]),e.find(".katex").css("font-size","1.6em")})};!o.autoLoadKaTeX||editormd.$katex||editormd.kaTeXLoaded?u():this.loadKaTeX(function(){editormd.$katex=katex,editormd.kaTeXLoaded=!0,u()})}return i.getMarkdown=function(){return r.val()},i}function markedRenderer(e,t){var i=$.extend({toc:!0,tocm:!1,tocStartLevel:1,pageBreak:!0,atLink:!0,emailLink:!0,taskList:!1,emoji:!1,tex:!1,flowChart:!1,sequenceDiagram:!1},t||{}),o=editormd.$marked,r=new o.Renderer;e=e||[];var n=editormd.regexs,a=(n.atLink,n.email,n.emailLink,n.pageBreak);const s=new EditorEmojiRenderer({faIconReg:n.fontAwesome,emojiReg:n.emoji,editormdLogoReg:n.editormdLogo,twemojiReg:n.twemoji});o.Renderer;r.emoji=(e=>i.emoji?s.execute(e):e);const l=this.settings,d=new AtLinkRenderer({atLinkReg:n.atLink,emailReg:n.emailReg,emailLinkReg:n.emailLinkReg,atLink:i.atLink,emailLink:i.emailLink,atLinkBase:l.atLinkBase});r.atLink=function(e){return d.execute(e)};const c=new LinkRenderer({atLinkReg:n.atLink,sanitize:this.sanitize});r.link=function(e,t,i){return c.execute(e,t,i)};const h=new HeadingRenderder({markdownToC:e||[],headerPrefix:r.options.headerPrefix});r.heading=function(e,t){let i=h.execute(e,t);return i.append(this.atLink(this.emoji(e))),i.prop("outerHTML")},r.pageBreak=function(e){return a.test(e)&&i.pageBreak&&(e='<hr style="page-break-after:always;" class="page-break editormd-page-break" />'),e},r.paragraph=function(e){var t=/\$\$(.*)\$\$/g.test(e),o=/^\$\$(.*)\$\$$/.test(e),r=o?' class="'+editormd.classNames.tex+'"':"",n=i.tocm?/^(\[TOC\]|\[TOCM\])$/.test(e):/^\[TOC\]$/.test(e),s=/^\[TOCM\]$/.test(e);const l=/^\[CodeTree\]$/.test(e);var d='<div class="markdown-toc editormd-markdown-toc">'+(e=!o&&t?e.replace(/(\$\$([^\$]*)\$\$)+/g,function(e,t){return'<span class="'+editormd.classNames.tex+'">'+t.replace(/\$/g,"")+"</span>"}):o?e.replace(/\$/g,""):e)+"</div>";return l?'<div class="editormd-code-treeview">'+e+"</div>":n?s?'<div class="editormd-toc-menu">'+d+"</div><br/>":d:a.test(e)?this.pageBreak(e):"<p"+r+">"+this.atLink(this.emoji(e))+"</p>\n"};const u={".js":"javascript"};return r.code=function(e,t,i){if(void 0===o.Renderer.prototype[t]&&void 0!==t){let i=t.substring(t.lastIndexOf("."),t.length);if(u.hasOwnProperty(i))return editormd.addCodeTree(t),this.code(e,u[i],t)}if("seq"===t||"sequence"===t)return'<div class="sequence-diagram">'+e+"</div>";if("flow"===t)return'<div class="flowchart">'+e+"</div>";if("math"===t||"latex"===t||"katex"===t)return'<p class="'+editormd.classNames.tex+'">'+e+"</p>";{let e=o.Renderer.prototype.code.apply(this,arguments);return void 0!==i?`<p class="code-file-path" >${i}</p>`+e:e}},r.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' style="text-align:'+t.align+'">':"<"+i+">")+this.atLink(this.emoji(e))+"</"+i+">\n"},r.listitem=function(e,t){return i.taskList&&t?(e=e.replace("<input ","<input class='task-list-item-checkbox' "),'<li class="task-list-item">'+this.atLink(this.emoji(e))+"</li>"):"<li>"+this.atLink(this.emoji(e))+"</li>"},r.image=function(e,t,i){if(null===e)return i;const{settings:o}=editormd;if("string"==typeof o.imgPath){!0!==/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(e)&&(e=o.imgPath+"/"+e)}let r='<img src="'+e+'" alt="'+i+'"';return t&&(r+=' title="'+t+'"'),r+="/>"},r}const editorMouseEvents={mouseOrTouch:function(e,t){t=t||"touchend";var i=e=e||"click";try{document.createEvent("TouchEvent"),i=t}catch(e){}return i}},regexConst={atLink:/@(\w+)/g,email:/(\w+)@(\w+)\.(\w+)\.?(\w+)?/g,emailLink:/(mailto:)?([\w\.\_]+)@(\w+)\.(\w+)\.?(\w+)?/g,emoji:/:([\w\+-]+):/g,emojiDatetime:/(\d{1,2}:\d{1,2}:\d{1,2})/g,twemoji:/:(tw-([\w]+)-?(\w+)?):/g,fontAwesome:/:(fa-([\w]+)(-(\w+)){0,}):/g,editormdLogo:/:(editormd-logo-?(\w+)?):/g,pageBreak:/^\[[=]{8,}\]$/},editorContent={insertValue:function(e){return this.replaceSelection(e),this},appendMarkdown:function(e){this.settings;var t=this.cm;return t.setValue(t.getValue()+e),this},setMarkdown:function(e){return this.cm.setValue(e||this.settings.markdown),this},getMarkdown:function(){return this.cm.getValue()},getValue:function(){return this.cm.getValue()},setValue:function(e){return this.cm.setValue(e),this},clear:function(){return this.cm.setValue(""),this},getHTML:function(){return this.settings.saveHTMLToTextarea?this.htmlTextarea.val():(alert("Error: settings.saveHTMLToTextarea == false"),!1)},getTextareaSavedHTML:function(){return this.getHTML()},getPreviewedHTML:function(){return this.settings.watch?this.previewContainer.html():(alert("Error: settings.watch == false"),!1)}},editorCursor={focus:function(){return this.cm.focus(),this},setCursor:function(e){return this.cm.setCursor(e),this},getCursor:function(){return this.cm.getCursor()}};var editorDialog={dialogLockScreen:function(){return $.proxy(editormd.dialogLockScreen,this)(),this},dialogLockScreen:function(){(this.settings||{dialogLockScreen:!0}).dialogLockScreen&&($("html,body").css("overflow","hidden"),this.resize())},dialogShowMask:function(e){return $.proxy(editormd.dialogShowMask,this)(e),this},dialogShowMask:function(e){var t=this.editor,i=this.settings||{dialogShowMask:!0};e.css({top:($(window).height()-e.height())/2+"px",left:($(window).width()-e.width())/2+"px"}),i.dialogShowMask&&t.children("."+this.classPrefix+"mask").css("z-index",parseInt(e.css("z-index"))-1).show()},createDialog:function(e){return $.proxy(editormd.createDialog,this)(e)},createInfoDialog:function(){var e=this,t=this.editor,i=this.classPrefix,o=['<div class="'+i+"dialog "+i+'dialog-info" style="">','<div class="'+i+'dialog-container">','<h1><i class="editormd-logo editormd-logo-lg editormd-logo-color"></i> '+editormd.title+"<small>v"+editormd.version+"</small></h1>","<p>"+this.lang.description+"</p>",'<p style="margin: 10px 0 20px 0;"><a href="'+editormd.homePage+'" target="_blank">'+editormd.homePage+' <i class="fa fa-external-link"></i></a></p>','<p style="font-size: 0.85em;">Copyright &copy; 2015 <a href="https://github.com/pandao" target="_blank" class="hover-link">Pandao</a>, The <a href="https://github.com/pandao/editor.md/blob/master/LICENSE" target="_blank" class="hover-link">MIT</a> License.</p>',"</div>",'<a href="javascript:;" class="fa fa-close '+i+'dialog-close"></a>',"</div>"].join("\n");t.append(o);var r=this.infoDialog=t.children("."+i+"dialog-info");return r.find("."+i+"dialog-close").bind(editormd.mouseOrTouch("click","touchend"),function(){e.hideInfoDialog()}),r.css("border",editormd.isIE8?"1px solid #ddd":"").css("z-index",editormd.dialogZindex).show(),this.infoDialogPosition(),this},infoDialogPosition:function(){var e=this.infoDialog,t=function(){e.css({top:($(window).height()-e.height())/2+"px",left:($(window).width()-e.width())/2+"px"})};return t(),$(window).resize(t),this},showInfoDialog:function(){$("html,body").css("overflow-x","hidden");var e=this.editor,t=this.settings,i=this.infoDialog=e.children("."+this.classPrefix+"dialog-info");return i.length<1&&this.createInfoDialog(),this.lockScreen(!0),this.mask.css({opacity:t.dialogMaskOpacity,backgroundColor:t.dialogMaskBgColor}).show(),i.css("z-index",editormd.dialogZindex).show(),this.infoDialogPosition(),this},hideInfoDialog:function(){return $("html,body").css("overflow-x",""),this.infoDialog.hide(),this.mask.hide(),this.lockScreen(!1),this}};const editorDimension={width:function(e){return this.editor.css("width","number"==typeof e?e+"px":e),this.resize(),this},height:function(e){return this.editor.css("height","number"==typeof e?e+"px":e),this.resize(),this},resize:function(e,t){e=e||null,t=t||null;var i=this.state,o=this.editor,r=this.preview,n=this.toolbar,a=this.settings,s=this.codeMirror;if(e&&o.css("width","number"==typeof e?e+"px":e),!a.autoHeight||i.fullscreen||i.preview?(t&&o.css("height","number"==typeof t?t+"px":t),i.fullscreen&&o.height($(window).height()),a.toolbar&&!a.readOnly?s.css("margin-top",n.height()+1).height(o.height()-n.height()):s.css("margin-top",0).height(o.height())):(o.css("height","auto"),s.css("height","auto")),a.watch)if(s.width(o.width()/2),r.width(i.preview?o.width():o.width()/2),this.previewContainer.css("padding",a.autoHeight?"20px 20px 50px 40px":"20px"),a.toolbar&&!a.readOnly?r.css("top",n.height()+1):r.css("top",0),!a.autoHeight||i.fullscreen||i.preview){var l=a.toolbar&&!a.readOnly?o.height()-n.height():o.height();r.height(l)}else r.height("");else s.width(o.width()),r.hide();return i.loaded&&$.proxy(a.onresize,this)(),this}};var editorDate={dateFormat:function(e){e=e||"";var t=function(e){return e<10?"0"+e:e},i=new Date,o=i.getFullYear(),r=o.toString().slice(2,4),n=t(i.getMonth()+1),a=t(i.getDate()),s=i.getDay(),l=t(i.getHours()),d=t(i.getMinutes()),c=t(i.getSeconds()),h=t(i.getMilliseconds()),u="",f=r+"-"+n+"-"+a,m=o+"-"+n+"-"+a,g=l+":"+d+":"+c;switch(e){case"UNIX Time":u=i.getTime();break;case"UTC":u=i.toUTCString();break;case"yy":u=r;break;case"year":case"yyyy":u=o;break;case"month":case"mm":u=n;break;case"cn-week-day":case"cn-wd":u="星期"+["日","一","二","三","四","五","六"][s];break;case"week-day":case"wd":u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s];break;case"day":case"dd":u=a;break;case"hour":case"hh":u=l;break;case"min":case"ii":u=d;break;case"second":case"ss":u=c;break;case"ms":u=h;break;case"yy-mm-dd":u=f;break;case"yyyy-mm-dd":u=m;break;case"yyyy-mm-dd h:i:s ms":case"full + ms":u=m+" "+g+" "+h;break;case"full":case"yyyy-mm-dd h:i:s":default:u=m+" "+g}return u}};const editorEvents={on:function(e,t){var i=this.settings;return void 0!==i["on"+e]&&(i["on"+e]=$.proxy(t,this)),this},off:function(e){var t=this.settings;return void 0!==t["on"+e]&&(t["on"+e]=function(){}),this},recreate:function(){var e=this.editor,t=this.settings;return this.codeMirror.remove(),this.setCodeMirror(),t.readOnly||(e.find(".editormd-dialog").length>0&&e.find(".editormd-dialog").remove(),t.toolbar&&(this.getToolbarHandles(),this.setToolbar())),this.loadedDisplay(!0),this},bindScrollEvent:function(){var e=this,t=this.preview,i=this.settings,o=this.codeMirror,r=editormd.mouseOrTouch;if(!i.syncScrolling)return this;var n=function(){o.find(".CodeMirror-scroll").bind(r("scroll","touchmove"),function(o){var r=$(this).height(),n=$(this).scrollTop(),a=n/$(this)[0].scrollHeight,s=0;t.find(".markdown-toc-list").each(function(){s+=$(this).height()});var l=t.find(".editormd-toc-menu").height();l=l||0,0===n?t.scrollTop(0):n+r>=$(this)[0].scrollHeight-16?t.scrollTop(t[0].scrollHeight):t.scrollTop((t[0].scrollHeight+s+l)*a),$.proxy(i.onscroll,e)(o)})},a=function(){o.find(".CodeMirror-scroll").unbind(r("scroll","touchmove"))},s=function(){t.bind(r("scroll","touchmove"),function(t){var r=$(this).height(),n=$(this).scrollTop(),a=n/$(this)[0].scrollHeight,s=o.find(".CodeMirror-scroll");0===n?s.scrollTop(0):n+r>=$(this)[0].scrollHeight?s.scrollTop(s[0].scrollHeight):s.scrollTop(s[0].scrollHeight*a),$.proxy(i.onpreviewscroll,e)(t)})},l=function(){t.unbind(r("scroll","touchmove"))};return o.bind({mouseover:n,mouseout:a,touchstart:n,touchend:a}),"single"===i.syncScrolling?this:(t.bind({mouseover:s,mouseout:l,touchstart:s,touchend:l}),this)},bindChangeEvent:function(){var e=this,t=this.cm,i=this.settings;return i.syncScrolling?(t.on("change",function(t,o){i.watch&&e.previewContainer.css("padding",i.autoHeight?"20px 20px 50px 40px":"20px"),timer=setTimeout(function(){clearTimeout(timer),e.save(),timer=null},i.delay)}),this):this},show:function(e){e=e||function(){};var t=this;return this.editor.show(0,function(){$.proxy(e,t)()}),this},hide:function(e){e=e||function(){};var t=this;return this.editor.hide(0,function(){$.proxy(e,t)()}),this}},editorExtendObject={extend:function(){return void 0!==arguments[1]&&("function"==typeof arguments[1]&&(arguments[1]=$.proxy(arguments[1],this)),this[arguments[0]]=arguments[1]),"object"==typeof arguments[0]&&void 0===arguments[0].length&&$.extend(!0,this,arguments[0]),this},set:function(e,t){return void 0!==t&&"function"==typeof t&&(t=$.proxy(t,this)),this[e]=t,this}},editorFlowChart={flowChartAndSequenceDiagramRender:function(){var e=this.settings,t=this.previewContainer;if(editormd.isIE8)return this;if(e.flowChart){if(null===flowchartTimer)return this;t.find(".flowchart").flowChart()}e.sequenceDiagram&&t.find(".sequence-diagram").sequenceDiagram({theme:"simple"});var i=this.preview,o=this.codeMirror.find(".CodeMirror-scroll"),r=o.height(),n=o.scrollTop(),a=n/o[0].scrollHeight,s=0;i.find(".markdown-toc-list").each(function(){s+=$(this).height()});var l=i.find(".editormd-toc-menu").height();return l=l||0,0===n?i.scrollTop(0):n+r>=o[0].scrollHeight-16?i.scrollTop(i[0].scrollHeight):i.scrollTop((i[0].scrollHeight+s+l)*a),this}},editorHighlight={previewCodeHighlight:function(){var e=this.settings,t=this.previewContainer;return e.previewCodeHighlight&&(t.find("pre").addClass("prettyprint linenums"),"undefined"!=typeof prettyPrint&&prettyPrint()),this}};var timer,editorKatex={kaTeXLoaded:!1,katexURL:{css:"http://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min",js:"http://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min"},loadKaTeX:function(e){editormd.loadCSS(editormd.katexURL.css,function(){editormd.loadScript(editormd.katexURL.js,e||function(){})})},katexRender:function(){return null===timer?this:(this.previewContainer.find("."+editormd.classNames.tex).each(function(){var e=$(this);editormd.$katex.render(e.text(),e[0]),e.find(".katex").css("font-size","1.6em")}),this)}},isMac=navigator.platform.toUpperCase().indexOf("MAC")>=0,key=isMac?"Cmd":"Ctrl",editorKeyMaps={keyMaps:{[key+"-1"]:"h1",[key+"-2"]:"h2",[key+"-3"]:"h3",[key+"-4"]:"h4",[key+"-5"]:"h5",[key+"-6"]:"h6",[key+"-B"]:"bold",[key+"-D"]:"datetime",[key+"Ctrl-E"]:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();this.settings.emoji?(e.replaceSelection(":"+i+":"),""===i&&e.setCursor(t.line,t.ch+1)):alert("Error: settings.emoji == false")},[key+"-Alt-G"]:"goto-line",[key+"-H"]:"hr",[key+"-I"]:"italic",[key+"-K"]:"code","Ctrl-L":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection(),o=""===i?"":' "'+i+'"';e.replaceSelection("["+i+"]("+o+")"),""===i&&e.setCursor(t.line,t.ch+1)},[key+"-U"]:"list-ul","Shift-Ctrl-A":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();this.settings.atLink?(e.replaceSelection("@"+i),""===i&&e.setCursor(t.line,t.ch+1)):alert("Error: settings.atLink == false")},["Shift"+key+"-C"]:"code",["Shift"+key+"Q"]:"quote",["Shift"+key+"S"]:"del",["Shift"+key+"K"]:"tex","Shift-Alt-C":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection(["```",i,"```"].join("\n")),""===i&&e.setCursor(t.line,t.ch+3)},["Shift-"+key+"-Alt-C"]:"code-block",["Shift-"+key+"-H"]:"html-entities","Shift-Alt-H":"help",["Shift-"+key+"-E"]:"emoji",["Shift-"+key+"-U"]:"uppercase","Shift-Alt-U":"ucwords",["Shift-"+key+"-Alt-U"]:"ucfirst","Shift-Alt-L":"lowercase",["Shift-"+key+"-I"]:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection(),o=""===i?"":' "'+i+'"';e.replaceSelection("!["+i+"]("+o+")"),""===i&&e.setCursor(t.line,t.ch+4)},["Shift-"+key+"-Alt-I"]:"image",["Shift-"+key+"-L"]:"link",["Shift-"+key+"-O"]:"list-ol",["Shift-"+key+"-P"]:"preformatted-text",["Shift-"+key+"-T"]:"table","Shift-Alt-P":"pagebreak",F9:"watch",F10:"preview",F11:"fullscreen"}},editorLoader={loadPlugins:{},loadFiles:{js:[],css:[],plugin:[]},loadPlugin:function(e,t,i){t=t||function(){},this.loadScript(e,function(){editormd.loadFiles.plugin.push(e),t()},i)},loadScript:function(e,t,i){i=i||"head",t=t||function(){};var o=null;(o=document.createElement("script")).id=e.replace(/[\./]+/g,"-"),o.type="text/javascript",o.src=e+".js",editormd.isIE8?o.onreadystatechange=function(){o.readyState&&("loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,editormd.loadFiles.js.push(e),t()))}:o.onload=function(){editormd.loadFiles.js.push(e),t()},"head"===i?document.getElementsByTagName("head")[0].appendChild(o):document.body.appendChild(o)},loadCSS:function(e,t,i){i=i||"head",t=t||function(){};var o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.onload=o.onreadystatechange=function(){editormd.loadFiles.css.push(e),t()},o.href=e+".css","head"===i?document.getElementsByTagName("head")[0].appendChild(o):document.body.appendChild(o)}},mdUtil={cloneMethod:(e,t)=>Object.assign({},e,t),appendMethod:function(e){Object.keys(e).forEach(t=>{this[t]=e[t]})},appendPrototype:function(e,t){let i=t.prototype,o=e.prototype;console.log("====",{obj:e,source:i,old:o}),e.prototype={...e.prototype,...t.prototype}},rand:function(e,t){var i=t-e+1;return Math.floor(Math.random()*i+e)}};const editorPlugin={executePlugin:function(e,t){var i=this,o=this.cm;return t=this.settings.pluginPath+t,"function"==typeof define?void 0===this[e]?(alert("Error: "+e+" plugin is not found, you are not load this plugin."),this):(this[e](o),this):($.inArray(t,editormd.loadFiles.plugin)<0?editormd.loadPlugin(t,function(){editormd.loadPlugins[e]=i[e],i[e](o)}):$.proxy(editormd.loadPlugins[e],this)(o),this)}};var editorPreview={previewing:function(){var e=this,t=this.editor,i=this.preview,o=this.toolbar,r=this.settings,n=this.codeMirror,a=this.previewContainer;if($.inArray(r.mode,["gfm","markdown"])<0)return this;r.toolbar&&o&&(o.toggle(),o.find(".fa[name=preview]").toggleClass("active")),n.toggle();var s=function(t){t.shiftKey&&27===t.keyCode&&e.previewed()};"none"===n.css("display")?(this.state.preview=!0,this.state.fullscreen&&i.css("background","#fff"),t.find("."+this.classPrefix+"preview-close-btn").show().bind(editormd.mouseOrTouch("click","touchend"),function(){e.previewed()}),r.watch?a.css("padding",""):this.save(),a.addClass(this.classPrefix+"preview-active"),i.show().css({position:"",top:0,width:t.width(),height:r.autoHeight&&!this.state.fullscreen?"auto":t.height()}),this.state.loaded&&$.proxy(r.onpreviewing,this)(),$(window).bind("keyup",s)):($(window).unbind("keyup",s),this.previewed())},previewed:function(){var e=this.editor,t=this.preview,i=this.toolbar,o=this.settings,r=this.previewContainer,n=e.find("."+this.classPrefix+"preview-close-btn");return this.state.preview=!1,this.codeMirror.show(),o.toolbar&&i.show(),t[o.watch?"show":"hide"](),n.hide().unbind(editormd.mouseOrTouch("click","touchend")),r.removeClass(this.classPrefix+"preview-active"),o.watch&&r.css("padding","20px"),t.css({background:null,position:"absolute",width:e.width()/2,height:o.autoHeight&&!this.state.fullscreen?"auto":e.height()-i.height(),top:o.toolbar?i.height():0}),this.state.loaded&&$.proxy(o.onpreviewed,this)(),this},fullscreen:function(){var e=this,t=this.state,i=this.editor,o=(this.preview,this.toolbar),r=this.settings,n=this.classPrefix+"fullscreen";o&&o.find(".fa[name=fullscreen]").parent().toggleClass("active");var a=function(i){i.shiftKey||27!==i.keyCode||t.fullscreen&&e.fullscreenExit()};return i.hasClass(n)?($(window).unbind("keyup",a),this.fullscreenExit()):(t.fullscreen=!0,$("html,body").css("overflow","hidden"),i.css({width:$(window).width(),height:$(window).height()}).addClass(n),this.resize(),$.proxy(r.onfullscreen,this)(),$(window).bind("keyup",a)),this},fullscreenExit:function(){var e=this.editor,t=this.settings,i=this.toolbar,o=this.classPrefix+"fullscreen";return this.state.fullscreen=!1,i&&i.find(".fa[name=fullscreen]").parent().removeClass("active"),$("html,body").css("overflow",""),e.css({width:e.data("oldWidth"),height:e.data("oldHeight")}).removeClass(o),this.resize(),$.proxy(t.onfullscreenExit,this)(),this}},editorSearch={search:function(e){var t=this.settings;return t.searchReplace?(t.readOnly||this.cm.execCommand(e||"find"),this):(alert("Error: settings.searchReplace == false"),this)},searchReplace:function(){return this.search("replace"),this},searchReplaceAll:function(){return this.search("replaceAll"),this}};const editorSelection={setSelection:function(e,t){return this.cm.setSelection(e,t),this},getSelection:function(){return this.cm.getSelection()},setSelections:function(e){return this.cm.setSelections(e),this},getSelections:function(){return this.cm.getSelections()},replaceSelection:function(e){return this.cm.replaceSelection(e),this}};var ucwords=function(e){return e.toLowerCase().replace(/\b(\w)|\s(\w)/g,function(e){return e.toUpperCase()})},firstUpperCase=function(e){return e.toLowerCase().replace(/\b(\w)/,function(e){return e.toUpperCase()})},editorString={ucwords:ucwords,wordsFirstUpperCase:ucwords,firstUpperCase:firstUpperCase,ucfirst:firstUpperCase,trim:function(e){return String.prototype.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}};const editorTableOfContent={markdownToCRenderer:function(e,t,i,o,r){r=r||null;var n="",a=0,s=this.classPrefix;o=o||1;for(var l=0,d=e.length;l<d;l++){var c=e[l].text,h=e[l].level;if(!(h<o)){n+=h>a?"":h<a?new Array(a-h+2).join("</ul></li>"):"</ul></li>";var u=c.replace(/(<([^>]+)>)/gi,"");r&&(c=r.emoji(c)),n+='<li><a class="toc-level-'+h+'" href="#'+u+'" level="'+h+'">'+c+"</a><ul>",a=h}}var f=t.find(".markdown-toc");if(f.length<1&&"false"===t.attr("previewContainer")){var m='<div class="markdown-toc '+s+'markdown-toc"></div>';m=i?'<div class="'+s+'toc-menu">'+m+"</div>":m,t.html(m),f=t.find(".markdown-toc")}return i&&f.wrap('<div class="'+s+'toc-menu"></div><br/>'),f.html('<ul class="markdown-toc-list"></ul>').children(".markdown-toc-list").html(n.replace(/\r?\n?\<ul\>\<\/ul\>/g,"")),f},tocDropdownMenu:function(e,t){t=t||"Table of Contents";var i=400,o=e.find("."+this.classPrefix+"toc-menu");return o.each(function(){var e=$(this),o=e.children(".markdown-toc"),r='<i class="fa fa-angle-down"></i>',n='<a href="javascript:;" class="toc-menu-btn">'+r+t+"</a>",a=o.children("ul"),s=a.find("li");o.append(n),s.first().before("<li><h1>"+t+" "+r+"</h1></li>"),e.mouseover(function(){a.show(),s.each(function(){var e=$(this),t=e.children("ul");if(""===t.html()&&t.remove(),t.length>0&&""!==t.html()){var o=e.children("a").first();o.children(".fa").length<1&&o.append($(r).css({float:"right",paddingTop:"4px"}))}e.mouseover(function(){t.css("z-index",i).show(),i+=1}).mouseleave(function(){t.hide()})})}).mouseleave(function(){a.hide()})}),o}};var editorTheme={themes:["default","dark"],previewThemes:["default","dark"],editorThemes:["default","3024-day","3024-night","ambiance","ambiance-mobile","base16-dark","base16-light","blackboard","cobalt","eclipse","elegant","erlang-dark","lesser-dark","mbo","mdn-like","midnight","monokai","neat","neo","night","paraiso-dark","paraiso-light","pastel-on-dark","rubyblue","solarized","the-matrix","tomorrow-night-eighties","twilight","vibrant-ink","xq-dark","xq-light"],setTheme:function(e){var t=this.editor,i=this.settings.theme,o=this.classPrefix+"theme-";return t.removeClass(o+i).addClass(o+e),this.settings.theme=e,this},setEditorTheme:function(e){var t=this.settings;return t.editorTheme=e,"default"!==e&&editormd.loadCSS(t.path+"codemirror/theme/"+t.editorTheme),this.cm.setOption("theme",e),this},setPreviewTheme:function(e){var t=this.preview,i=this.settings.previewTheme,o=this.classPrefix+"preview-theme-";return t.removeClass(o+i).addClass(o+e),this.settings.previewTheme=e,this}},editorToolbar={showToolbar:function(e){var t=this.settings;return t.readOnly?this:(t.toolbar&&(this.toolbar.length<1||""===this.toolbar.find("."+this.classPrefix+"menu").html())&&this.setToolbar(),t.toolbar=!0,this.toolbar.show(),this.resize(),$.proxy(e||function(){},this)(),this)},hideToolbar:function(e){return this.settings.toolbar=!1,this.toolbar.hide(),this.resize(),$.proxy(e||function(){},this)(),this},setToolbarAutoFixed:function(e){var t=this.state,i=this.editor,o=this.toolbar,r=this.settings;void 0!==e&&(r.toolbarAutoFixed=e);return!t.fullscreen&&!t.preview&&r.toolbar&&r.toolbarAutoFixed&&$(window).bind("scroll",function(){var e=$(window),t=e.scrollTop();if(!r.toolbarAutoFixed)return!1;t-i.offset().top>10&&t<i.height()?o.css({position:"fixed",width:i.width()+"px",left:(e.width()-i.width())/2+"px"}):o.css({position:"absolute",width:"100%",left:0})}),this},setToolbar:function(){var e=this.settings;if(e.readOnly)return this;var t=this.editor,i=(this.preview,this.classPrefix),o=this.toolbar=t.children("."+i+"toolbar");if(e.toolbar&&o.length<1){var r='<div class="'+i+'toolbar"><div class="'+i+'toolbar-container"><ul class="'+i+'menu"></ul></div></div>';t.append(r),o=this.toolbar=t.children("."+i+"toolbar")}if(!e.toolbar)return o.hide(),this;o.show();for(var n="function"==typeof e.toolbarIcons?e.toolbarIcons():"string"==typeof e.toolbarIcons?editormd.toolbarModes[e.toolbarIcons]:e.toolbarIcons,a=o.find("."+this.classPrefix+"menu"),s="",l=!1,d=0,c=n.length;d<c;d++){var h=n[d];if("||"===h)l=!0;else if("|"===h)s+='<li class="divider" unselectable="on">|</li>';else{var u=/h(\d)/.test(h),f=h;"watch"!==h||e.watch||(f="unwatch");var m=e.lang.toolbar[f],g=e.toolbarIconTexts[f],p=e.toolbarIconsClass[f];m=void 0===m?"":m,g=void 0===g?"":g,p=void 0===p?"":p;var w=l?'<li class="pull-right">':"<li>";void 0!==e.toolbarCustomIcons[h]&&"function"!=typeof e.toolbarCustomIcons[h]?w+=e.toolbarCustomIcons[h]:(w+='<a href="javascript:;" title="'+m+'" unselectable="on">',w+='<i class="fa '+p+'" name="'+h+'" unselectable="on">'+(u?h.toUpperCase():""===p?g:"")+"</i>",w+="</a>"),w+="</li>",s=l?w+s:s+w}}return a.html(s),a.find('[title="Lowercase"]').attr("title",e.lang.toolbar.lowercase),a.find('[title="ucwords"]').attr("title",e.lang.toolbar.ucwords),this.setToolbarHandler(),this.setToolbarAutoFixed(),this},getToolbarHandles:function(e){var t=this.toolbarHandlers=editormd.toolbarHandlers;return e&&void 0!==toolbarIconHandlers[e]?t[e]:t},setToolbarHandler:function(){var e=this,t=this.settings;if(!t.toolbar||t.readOnly)return this;var i=this.toolbar,o=this.cm,r=this.classPrefix,n=this.toolbarIcons=i.find("."+r+"menu > li > a"),a=this.getToolbarHandles();return n.bind(editormd.mouseOrTouch("click","touchend"),function(i){var r=$(this).children(".fa"),n=r.attr("name"),s=o.getCursor(),l=o.getSelection();if(""!==n)return e.activeIcon=r,void 0!==a[n]?$.proxy(a[n],e)(o):void 0!==t.toolbarHandlers[n]&&$.proxy(t.toolbarHandlers[n],e)(o,r,s,l),"link"!==n&&"reference-link"!==n&&"image"!==n&&"code-block"!==n&&"preformatted-text"!==n&&"watch"!==n&&"preview"!==n&&"search"!==n&&"fullscreen"!==n&&"info"!==n&&o.focus(),!1}),this}};const editorToolbarHandlers={toolbarHandlers:{undo:function(){this.cm.undo()},redo:function(){this.cm.redo()},bold:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("**"+i+"**"),""===i&&e.setCursor(t.line,t.ch+2)},del:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("~~"+i+"~~"),""===i&&e.setCursor(t.line,t.ch+2)},italic:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("*"+i+"*"),""===i&&e.setCursor(t.line,t.ch+1)},quote:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("> "+i),e.setCursor(t.line,t.ch+2)):e.replaceSelection("> "+i)},ucfirst:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(editormd.firstUpperCase(t)),e.setSelections(i)},ucwords:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(editormd.wordsFirstUpperCase(t)),e.setSelections(i)},uppercase:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(t.toUpperCase()),e.setSelections(i)},lowercase:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(t.toLowerCase()),e.setSelections(i)},h1:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("# "+i),e.setCursor(t.line,t.ch+2)):e.replaceSelection("# "+i)},h2:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("## "+i),e.setCursor(t.line,t.ch+3)):e.replaceSelection("## "+i)},h3:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("### "+i),e.setCursor(t.line,t.ch+4)):e.replaceSelection("### "+i)},h4:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("#### "+i),e.setCursor(t.line,t.ch+5)):e.replaceSelection("#### "+i)},h5:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("##### "+i),e.setCursor(t.line,t.ch+6)):e.replaceSelection("##### "+i)},h6:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("###### "+i),e.setCursor(t.line,t.ch+7)):e.replaceSelection("###### "+i)},"list-ul":function(){var e=this.cm,t=(e.getCursor(),e.getSelection());if(""===t)e.replaceSelection("- "+t);else{for(var i=t.split("\n"),o=0,r=i.length;o<r;o++)i[o]=""===i[o]?"":"- "+i[o];e.replaceSelection(i.join("\n"))}},"list-ol":function(){var e=this.cm,t=(e.getCursor(),e.getSelection());if(""===t)e.replaceSelection("1. "+t);else{for(var i=t.split("\n"),o=0,r=i.length;o<r;o++)i[o]=""===i[o]?"":o+1+". "+i[o];e.replaceSelection(i.join("\n"))}},hr:function(){var e=this.cm,t=e.getCursor();e.getSelection();e.replaceSelection((0!==t.ch?"\n\n":"\n")+"------------\n\n")},tex:function(){if(!this.settings.tex)return alert("settings.tex === false"),this;var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("$$"+i+"$$"),""===i&&e.setCursor(t.line,t.ch+2)},link:function(){this.executePlugin("linkDialog","link-dialog/link-dialog")},"reference-link":function(){this.executePlugin("referenceLinkDialog","reference-link-dialog/reference-link-dialog")},pagebreak:function(){if(!this.settings.pageBreak)return alert("settings.pageBreak === false"),this;var e=this.cm;e.getSelection();e.replaceSelection("\r\n[========]\r\n")},image:function(){this.executePlugin("imageDialog","image-dialog/image-dialog")},code:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("`"+i+"`"),""===i&&e.setCursor(t.line,t.ch+1)},"code-block":function(){this.executePlugin("codeBlockDialog","code-block-dialog/code-block-dialog")},"preformatted-text":function(){this.executePlugin("preformattedTextDialog","preformatted-text-dialog/preformatted-text-dialog")},table:function(){this.executePlugin("tableDialog","table-dialog/table-dialog")},datetime:function(){var e=this.cm,t=(e.getSelection(),new Date,this.settings.lang.name),i=editormd.dateFormat()+" "+editormd.dateFormat("zh-cn"===t||"zh-tw"===t?"cn-week-day":"week-day");e.replaceSelection(i)},emoji:function(){this.executePlugin("emojiDialog","emoji-dialog/emoji-dialog")},"html-entities":function(){this.executePlugin("htmlEntitiesDialog","html-entities-dialog/html-entities-dialog")},"goto-line":function(){this.executePlugin("gotoLineDialog","goto-line-dialog/goto-line-dialog")},watch:function(){this[this.settings.watch?"unwatch":"watch"]()},preview:function(){this.previewing()},fullscreen:function(){this.fullscreen()},clear:function(){this.clear()},search:function(){this.search()},help:function(){this.executePlugin("helpDialog","help-dialog/help-dialog")},info:function(){this.showInfoDialog()}}};var editorWatching={watch:function(e){var t=this.settings;if($.inArray(t.mode,["gfm","markdown"])<0)return this;if(this.state.watching=t.watch=!0,this.preview.show(),this.toolbar){var i=t.toolbarIconsClass.watch,o=t.toolbarIconsClass.unwatch,r=this.toolbar.find(".fa[name=watch]");r.parent().attr("title",t.lang.toolbar.watch),r.removeClass(o).addClass(i)}return this.codeMirror.css("border-right","1px solid #ddd").width(this.editor.width()/2),timer=0,this.save().resize(),t.onwatch||(t.onwatch=e||function(){}),$.proxy(t.onwatch,this)(),this},unwatch:function(e){var t=this.settings;if(this.state.watching=t.watch=!1,this.preview.hide(),this.toolbar){var i=t.toolbarIconsClass.watch,o=t.toolbarIconsClass.unwatch,r=this.toolbar.find(".fa[name=watch]");r.parent().attr("title",t.lang.toolbar.unwatch),r.removeClass(i).addClass(o)}return this.codeMirror.css("border-right","none").width(this.editor.width()),this.resize(),t.onunwatch||(t.onunwatch=e||function(){}),$.proxy(t.onunwatch,this)(),this}},editorCodeMirror={setCodeMirrorTheme:function(e){return this.setEditorTheme(e),this},setCodeMirror:function(){var e=this.settings,t=this.editor;"default"!==e.editorTheme&&editormd.loadCSS(e.path+"codemirror/theme/"+e.editorTheme);var i={mode:e.mode,theme:e.editorTheme,tabSize:e.tabSize,dragDrop:!1,autofocus:e.autoFocus,autoCloseTags:e.autoCloseTags,readOnly:!!e.readOnly&&"nocursor",indentUnit:e.indentUnit,lineNumbers:e.lineNumbers,lineWrapping:e.lineWrapping,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:e.codeFold,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:e.matchBrackets,indentWithTabs:e.indentWithTabs,styleActiveLine:e.styleActiveLine,styleSelectedText:e.styleSelectedText,autoCloseBrackets:e.autoCloseBrackets,showTrailingSpace:e.showTrailingSpace,highlightSelectionMatches:!!e.matchWordHighlight&&{showToken:"onselected"!==e.matchWordHighlight&&/\w/}};return this.codeEditor=this.cm=editormd.$CodeMirror.fromTextArea(this.markdownTextarea[0],i),this.codeMirror=this.cmElement=t.children(".CodeMirror"),""!==e.value&&this.cm.setValue(e.value),this.codeMirror.css({fontSize:e.fontSize,width:e.watch?"50%":"100%"}),e.autoHeight&&(this.codeMirror.css("height","auto"),this.cm.setOption("viewportMargin",1/0)),e.lineNumbers||this.codeMirror.find(".CodeMirror-gutters").css("border-right","none"),this},getCodeMirrorOption:function(e){return this.cm.getOption(e)},setCodeMirrorOption:function(e,t){return this.cm.setOption(e,t),this}};function editorGotoLine(e){var t=this.settings;if(!t.gotoLine)return this;var i=this.cm,o=i.lineCount(),r=this.preview;if("string"==typeof e&&("last"===e&&(e=o),"first"===e&&(e=1)),"number"!=typeof e)return alert("Error: The line number must be an integer."),this;if((e=parseInt(e)-1)>o)return alert("Error: The line number range 1-"+o),this;i.setCursor({line:e,ch:0});var n=i.getScrollInfo().clientHeight,a=i.charCoords({line:e,ch:0},"local");if(i.scrollTo(null,(a.top+a.bottom-n)/2),t.watch){var s=this.codeMirror.find(".CodeMirror-scroll")[0],l=$(s).height(),d=s.scrollTop,c=d/s.scrollHeight;0===d?r.scrollTop(0):d+l>=s.scrollHeight-16?r.scrollTop(r[0].scrollHeight):r.scrollTop(r[0].scrollHeight*c)}return i.focus(),this}const qKeyMap={addKeyMap:function(e,t){return this.cm.addKeyMap(e,t),this},removeKeyMap:function(e){return this.cm.removeKeyMap(e),this},registerKeyMaps:function(e){var t=this,i=this.cm,o=this.settings,r=editormd.toolbarHandlers,n=o.disabledKeyMaps;if(e=e||null){for(var a in e)if($.inArray(a,n)<0){e[a],i.addKeyMap(e)}}else{for(var s in editormd.keyMaps){var l=editormd.keyMaps[s],d="string"==typeof l?$.proxy(r[l],t):$.proxy(l,t);if($.inArray(s,["F9","F10","F11"])<0&&$.inArray(s,n)<0){var c={};c[s]=d,i.addKeyMap(c)}}$(window).keydown(function(e){if($.inArray({120:"F9",121:"F10",122:"F11"}[e.keyCode],n)<0)switch(e.keyCode){case 120:return $.proxy(r.watch,t)(),!1;case 121:return $.proxy(r.preview,t)(),!1;case 122:return $.proxy(r.fullscreen,t)(),!1}})}return this}},qLoader={loadQueues:function(){var e=this,t=this.settings,i=t.path,o=function(){editormd.isIE8?e.loadedDisplay():t.flowChart||t.sequenceDiagram?editormd.loadScript(i+"raphael.min",function(){editormd.loadScript(i+"underscore.min",function(){!t.flowChart&&t.sequenceDiagram?editormd.loadScript(i+"sequence-diagram.min",function(){e.loadedDisplay()}):t.flowChart&&!t.sequenceDiagram?editormd.loadScript(i+"flowchart.min",function(){editormd.loadScript(i+"jquery.flowchart.min",function(){e.loadedDisplay()})}):t.flowChart&&t.sequenceDiagram&&editormd.loadScript(i+"flowchart.min",function(){editormd.loadScript(i+"jquery.flowchart.min",function(){editormd.loadScript(i+"sequence-diagram.min",function(){e.loadedDisplay()})})})})}):e.loadedDisplay()};return editormd.loadCSS(i+"codemirror/codemirror.min"),t.searchReplace&&!t.readOnly&&(editormd.loadCSS(i+"codemirror/addon/dialog/dialog"),editormd.loadCSS(i+"codemirror/addon/search/matchesonscrollbar")),t.codeFold&&editormd.loadCSS(i+"codemirror/addon/fold/foldgutter"),editormd.loadScript(i+"codemirror/codemirror.min",function(){editormd.$CodeMirror=CodeMirror,editormd.loadScript(i+"codemirror/modes.min",function(){editormd.loadScript(i+"codemirror/addons.min",function(){if(e.setCodeMirror(),"gfm"!==t.mode&&"markdown"!==t.mode)return e.loadedDisplay(),!1;e.setToolbar(),editormd.loadScript(i+"marked.min",function(){editormd.$marked=marked,t.previewCodeHighlight?editormd.loadScript(i+"prettify.min",function(){o()}):o()})})})}),this},loadedDisplay:function(e){e=e||!1;var t=this,i=this.editor,o=this.preview,r=this.settings;return this.containerMask.hide(),this.save(),r.watch&&o.show(),i.data("oldWidth",i.width()).data("oldHeight",i.height()),this.resize(),this.registerKeyMaps(),$(window).resize(function(){t.resize()}),this.bindScrollEvent().bindChangeEvent(),e||$.proxy(r.onload,this)(),this.state.loaded=!0,this}};function editorSave(){if(null===timer)return this;var e=this,t=this.state,i=this.settings,o=this.cm,r=o.getValue(),n=this.previewContainer;if("gfm"!==i.mode&&"markdown"!==i.mode)return this.markdownTextarea.val(r),this;var a=editormd.$marked,s=this.markdownToC=[],l=this.markedRendererOptions={toc:i.toc,tocm:i.tocm,tocStartLevel:i.tocStartLevel,pageBreak:i.pageBreak,taskList:i.taskList,emoji:i.emoji,tex:i.tex,atLink:i.atLink,emailLink:i.emailLink,flowChart:i.flowChart,sequenceDiagram:i.sequenceDiagram,previewCodeHighlight:i.previewCodeHighlight},d=this.markedOptions={renderer:editormd.markedRenderer(s,l),gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!i.htmlDecode,smartLists:!0,smartypants:!0};a.setOptions(d);var c=editormd.$marked(r,d);if(c=editormd.filterHTMLTags(c,i.htmlDecode),this.markdownTextarea.text(r),o.save(),i.saveHTMLToTextarea&&this.htmlTextarea.text(c),i.watch||!i.watch&&t.preview){if(n.html(c),n.find(".task-list-item").each(function(){$(this).parent().addClass("task-list")}),this.previewCodeHighlight(),i.toc){var h=""===i.tocContainer?n:$(i.tocContainer),u=h.find("."+this.classPrefix+"toc-menu");h.attr("previewContainer",""===i.tocContainer?"true":"false"),""!==i.tocContainer&&u.length>0&&u.remove(),editormd.markdownToCRenderer(s,h,i.tocDropdown,i.tocStartLevel),(i.tocDropdown||h.find("."+this.classPrefix+"toc-menu").length>0)&&editormd.tocDropdownMenu(h,""!==i.tocTitle?i.tocTitle:this.lang.tocTitle),""!==i.tocContainer&&n.find(".markdown-toc").css("border","none")}i.tex&&(!editormd.kaTeXLoaded&&i.autoLoadModules?editormd.loadKaTeX(function(){editormd.$katex=katex,editormd.kaTeXLoaded=!0,e.katexRender()}):(editormd.$katex=katex,this.katexRender())),(i.flowChart||i.sequenceDiagram)&&(flowchartTimer=setTimeout(function(){clearTimeout(flowchartTimer),e.flowChartAndSequenceDiagramRender(),flowchartTimer=null},10)),t.loaded&&$.proxy(i.onchange,this)()}return this}class EditorRenderer{constructor(e){this.defaults={},e&&(this.config=$.extend(this.defaults,e||{}))}}class AtLinkRenderer{constructor(e){this.defaults={},this.options=$.extend(this.defaults,e||{})}execute(e){const{atLinkReg:t,emailReg:i,emailLinkReg:o,atLink:r,emailLink:n,atLinkBase:a}=this.options;return t.test(e)?(r&&(e=(e=e.replace(i,function(e,t,i,o){return e.replace(/@/g,"_#_&#64;_#_")})).replace(t,function(e,t){return'<a href="'+a+t+'" title="&#64;'+t+'" class="at-link">'+e+"</a>"}).replace(/_#_&#64;_#_/g,"@")),n&&(e=e.replace(o,function(e,t,i,o,r){return!t&&$.inArray(r,"jpg|jpeg|png|gif|webp|ico|icon|pdf".split("|"))<0?'<a href="mailto:'+e+'">'+e+"</a>":e})),e):e}}class EditorEmojiRenderer{constructor(e){this.defaults={},this.config=$.extend(this.defaults,e||{})}execute(e){const t=this.config;var i=(e=e.replace(editormd.regexs.emojiDatetime,function(e){return e.replace(/:/g,"&#58;")})).match(t.emojiReg);if(!i)return e;for(var o=0,r=i.length;o<r;o++)":+1:"===i[o]&&(i[o]=":\\+1:"),e=e.replace(new RegExp(i[o]),function(e,i){var o=e.match(t.faIconReg),r=e.replace(/:/g,"");if(o)for(var n=0,a=o.length;n<a;n++){var s=o[n].replace(/:/g,"");return'<i class="fa '+s+' fa-emoji" title="'+s.replace("fa-","")+'"></i>'}else{var l=e.match(t.editormdLogoReg),d=e.match(t.twemojiReg);if(l)for(var c=0,h=l.length;c<h;c++){var u=l[c].replace(/:/g,"");return'<i class="'+u+'" title="Editor.md logo ('+u+')"></i>'}else{if(!d){var f="+1"===r?"plus1":r;return f="moon"===(f="black_large_square"===f?"black_square":f)?"waxing_gibbous_moon":f,'<img src="'+editormd.emoji.path+f+editormd.emoji.ext+'" class="emoji" title="&#58;'+r+'&#58;" alt="&#58;'+r+'&#58;" />'}for(var m=0,g=d.length;m<g;m++){var p=d[m].replace(/:/g,"").replace("tw-","");return'<img src="'+editormd.twemoji.path+p+editormd.twemoji.ext+'" title="twemoji-'+p+'" alt="twemoji-'+p+'" class="emoji twemoji" />'}}}});return e}}class HeadingRenderder extends EditorRenderer{execute(e,t){let{markdownToC:i,headerPrefix:o}=this.config;var r=[];if(/\s*\<a\s*href\=\"(.*)\"\s*([^\>]*)\>(.*)\<\/a\>\s*/.test(e)){for(var n=[],a=0,s=(e=e.split(/\<a\s*([^\>]+)\>([^\>]*)\<\/a\>/)).length;a<s;a++)n.push(e[a].replace(/\s*href\=\"(.*)\"\s*/g,""));e=n.join(" ")}var l=(e=editormd.trim(e)).toLowerCase().replace(/[^\w]+/g,"-"),d={text:e,level:t,slug:l};var c=/^[\u4e00-\u9fa5]+$/.test(e)?escape(e).replace(/\%/g,""):e.toLowerCase().replace(/[^\w]+/g,"-");r.indexOf(c)>=0&&(c+=mdUtil.rand(100,999999)),r.push(c),d.id=c,i.push(d);let h=$(`<h${t}/>`,{id:`h${t}-${o+c}`}),u=$("<a/>",{name:e,class:"reference-link"});h.append(u);let f=$("<span/>",{class:"header-link octicon octicon-link"});return h.append(f),h}}class LinkRenderer{constructor(e){this.defaults={},this.options=$.extend(this.defaults,e||{})}execute(e,t,i){const{atLinkReg:o}=this.options;if(this.options.sanitize)try{if(0===decodeURIComponent(unescape(e)).replace(/[^\w:]/g,"").toLowerCase().indexOf("javascript:"))return""}catch(e){return""}var r='<a href="'+e+'"';return o.test(t)||o.test(i)?(t&&(r+=' title="'+t.replace(/@/g,"&#64;")),r+'">'+i.replace(/@/g,"&#64;")+"</a>"):(t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>")}}!function(e){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define?define.amd||define(["jquery"],e):window.editormd=e()}(function(){"use strict";var e=void 0!==window.jQuery?window.jQuery:window.Zepto;if(void 0!==e){var t=function(e,i){return new t.fn.init(e,i)};return t.title=t.$name=editormdTitle,t.version="1.5.0",t.homePage="https://pandao.github.io/editor.md/",t.classPrefix=editorClassPrefix,t.toolbarModes={full:["undo","redo","|","bold","del","italic","quote","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","image","code","preformatted-text","code-block","table","datetime","emoji","html-entities","pagebreak","|","goto-line","watch","preview","fullscreen","clear","search","|","help","info"],simple:["undo","redo","|","bold","del","italic","quote","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","watch","preview","fullscreen","|","help","info"],mini:["undo","redo","|","watch","preview","|","help","info"]},t.defaults=editorDefault,t.classNames={tex:t.classPrefix+"tex"},t.dialogZindex=99999,t.$katex=null,t.$marked=null,t.$CodeMirror=null,t.$prettyPrint=null,t.prototype=t.fn={state:{watching:!1,loaded:!1,preview:!1,fullscreen:!1},init:function(i,o){o=o||{},"object"==typeof i&&(o=i);var r,n=this.classPrefix=t.classPrefix,a=e.extend(!0,{},t.defaults,o);if(o.imageFormats&&(a.imageFormats=o.imageFormats),o.emojiCategories&&(a.emojiCategories=o.emojiCategories),i instanceof HTMLElement){let t=i;r=this.editor=e(t),i=t.id.length>0?t.id:a.id}else i="object"==typeof i?a.id:i,r=this.editor=e("#"+i);this.id=i,this.lang=a.lang;var s=this.classNames={textarea:{html:n+"html-textarea",markdown:n+"markdown-textarea"}};a.pluginPath=""===a.pluginPath?a.path+"../plugins/":a.pluginPath,this.state.watching=!!a.watch,r.hasClass("editormd")||r.addClass("editormd"),r.css({width:"number"==typeof a.width?a.width+"px":a.width,height:"number"==typeof a.height?a.height+"px":a.height}),a.autoHeight&&r.css("height","auto");var l=this.markdownTextarea=r.children("textarea");l.length<1&&(r.append("<textarea></textarea>"),l=this.markdownTextarea=r.children("textarea")),l.addClass(s.textarea.markdown).attr("placeholder",a.placeholder),void 0!==l.attr("name")&&""!==l.attr("name")||l.attr("name",""!==a.name?a.name:i+"-markdown-doc"),void 0!==l.get(0).dataset.imgPath&&(a.imgPath=l.get(0).dataset.imgPath);var d=[a.readOnly?"":'<a href="javascript:;" class="fa fa-close '+n+'preview-close-btn"></a>',a.saveHTMLToTextarea?'<textarea class="'+s.textarea.html+'" name="'+i+'-html-code"></textarea>':"",'<div class="'+n+'preview"><div class="markdown-body '+n+'preview-container"></div></div>','<div class="'+n+'container-mask" style="display:block;"></div>','<div class="'+n+'mask"></div>'].join("\n");return r.append(d).addClass(n+"vertical"),""!==a.theme&&r.addClass(n+"theme-"+a.theme),this.mask=r.children("."+n+"mask"),this.containerMask=r.children("."+n+"container-mask"),""!==a.markdown&&l.val(a.markdown),""!==a.appendMarkdown&&l.val(l.val()+a.appendMarkdown),this.htmlTextarea=r.children("."+s.textarea.html),this.preview=r.children("."+n+"preview"),this.previewContainer=this.preview.children("."+n+"preview-container"),""!==a.previewTheme&&this.preview.addClass(n+"preview-theme-"+a.previewTheme),"function"==typeof define&&define.amd&&(void 0!==window.katex&&(t.$katex=window.katex),a.searchReplace&&!a.readOnly&&(t.loadCSS(a.path+"codemirror/addon/dialog/dialog"),t.loadCSS(a.path+"codemirror/addon/search/matchesonscrollbar"))),t.settings=a,this.settings=a,"function"==typeof define&&define.amd||!a.autoLoadModules?(void 0!==window.CodeMirror&&(t.$CodeMirror=window.CodeMirror),void 0!==window.marked&&(t.$marked=window.marked),this.setCodeMirror().setToolbar().loadedDisplay()):this.loadQueues(),this},gotoLine:editorGotoLine,config:function(i,o){var r=t.settings;return"object"==typeof i&&(r=e.extend(!0,r,i)),"string"==typeof i&&(r[i]=o),this.settings=r,this.recreate(),this},save:editorSave},t.fn.appendMethod=mdUtil.appendMethod,t.fn.appendMethod(editorKatex),t.fn.appendMethod(editorCodeMirror),t.fn=Object.assign({},t.fn,editorWatching),t.fn=Object.assign({},t.fn,editorDialog),t.fn=Object.assign({},t.fn,editorToolbar),t.fn=Object.assign({},t.fn,editorTheme),t.fn=Object.assign({},t.fn,editorPreview),t.fn=Object.assign({},t.fn,editorSearch),t.fn=Object.assign({},t.fn,editorContent),t.fn=Object.assign({},t.fn,editorSelection),t.fn=Object.assign({},t.fn,editorEvents),t.fn=Object.assign({},t.fn,editorFlowChart),t.fn=Object.assign({},t.fn,editorHighlight),t.fn=Object.assign({},t.fn,editorDimension),t.fn=Object.assign({},t.fn,editorPlugin),t.fn=Object.assign({},t.fn,editorCursor),t.fn=Object.assign({},t.fn,editorExtendObject),t.fn=Object.assign({},t.fn,qKeyMap),t.fn=Object.assign({},t.fn,qLoader),t.fn.init.prototype=t.fn,t.appendMethod=mdUtil.appendMethod,t.appendMethod(editorToolbarHandlers),t.appendMethod(editorKeyMaps),t.appendMethod(editorString),t.appendMethod(editorCodeTree),t.regexs=regexConst,t.emoji={path:"https://www.webpagefx.com/tools/emoji-cheat-sheet/graphics/emojis/",ext:".png"},t.twemoji={path:"http://twemoji.maxcdn.com/36x36/",ext:".png"},t.markedRenderer=markedRenderer,t.filterHTMLTags=editorFilterHTMLTags,t.markdownToHTML=editorMarkdownToHTML,t.isIE="Microsoft Internet Explorer"==navigator.appName,t.isIE8=t.isIE&&"8."==navigator.appVersion.match(/8./i),t.appendMethod(editorTableOfContent),t.appendMethod(editorLoader),t.appendMethod(editorKatex),t.appendMethod(editorLockScreen),t.appendMethod(editorMouseEvents),t.appendMethod(editorDate),t.createDialog=editorCreateDialog,t}}),jQuery.fn.editormd=function(e){let t=this.get(0);if(t)return console.log("plugin create editor",{containter:t}),editormd(t,e)};